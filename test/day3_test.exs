defmodule Day3Test do
  use ExUnit.Case

  test "number of trees are found" do
    map = [
      "..##.........##.........##.........##.........##.........##.......",
      "#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..",
      ".#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.",
      "..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#",
      ".#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.",
      "..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....",
      ".#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#",
      ".#........#.#........#.#........#.#........#.#........#.#........#",
      "#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...",
      "#...##....##...##....##...##....##...##....##...##....##...##....#",
      ".#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#"
    ]

    trees = TobogganMap.find_trees(map)
    assert Enum.count(trees) == 7
  end

  test "number of trees are found for each traversal" do
    map = [
      "..##.........##.........##.........##.........##.........##.......",
      "#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..",
      ".#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.",
      "..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#",
      ".#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.",
      "..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....",
      ".#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#",
      ".#........#.#........#.#........#.#........#.#........#.#........#",
      "#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...",
      "#...##....##...##....##...##....##...##....##...##....##...##....#",
      ".#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#"
    ]

    trees_at_1_1 = TobogganMap.find_trees_given_slope(map, {1, 1})
    trees_at_3_1 = TobogganMap.find_trees_given_slope(map, {3, 1})
    trees_at_5_1 = TobogganMap.find_trees_given_slope(map, {5, 1})
    trees_at_7_1 = TobogganMap.find_trees_given_slope(map, {7, 1})
    trees_at_1_2 = TobogganMap.find_trees_given_slope(map, {1, 2})

    assert Enum.count(trees_at_1_1) == 2
    assert Enum.count(trees_at_3_1) == 7
    assert Enum.count(trees_at_5_1) == 3
    assert Enum.count(trees_at_7_1) == 4
    assert Enum.count(trees_at_1_2) == 2
  end
end
